<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>λ³„νƒ€κ³  μ£Όν–‰ ν™”λ©΄</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=ca66c24bcf740dae018b8f1511d02475"></script>
  <link rel="stylesheet" href="css/mapdriving.css">
</head>
<body>
  <div class="app-container">

    <!-- ν΄λ°” -->
    <button id="menu-toggle">β°</button>
    <div id="sidebar">
      <h3>π  ν™</h3>
      <div class="menu-item">
        <img src="imgs/communityicon.png" alt="μ»¤λ®¤λ‹ν‹° μ•„μ΄μ½" class="menu-icon">
        μ»¤λ®¤λ‹ν‹°
      </div>
      <div class="menu-item">λ‚΄λΉ„κ²μ΄μ…</div>
    </div>

    <div class="logo-area">
      <img src="imgs/logo.png" alt="λ³„νƒ€κ³  λ΅κ³ " class="logo-img">
    </div>

    <!-- μ§€λ„ -->
    <div id="map-container">
      <div id="map"></div>

      <!-- β… μ£Όν–‰ μΆ…λ£ λ²„νΌ -->
      <button class="map-button end-btn" onclick="endRide()">μ£Όν–‰ μΆ…λ£</button>

      <!-- β… μ‹ κ³  μ¤λ²„λ μ΄ -->
      <div id="report-overlay" onclick="detectDoubleTap(event)">
        <button id="close-overlay" onclick="closeOverlay(event)">β•</button>
        <div class="overlay-content">
          <img src="imgs/doubletap.png" alt="λ‘ λ² ν„°μΉ" class="tap-img">
          <p>λ„λ΅ κ²°ν•¨μ„ μ‹ κ³ ν•κ³  μ‹¶λ‹¤λ©΄<br><span class="highlight">ν™”λ©΄μ„ λ‘ λ² ν„°μΉ</span> ν•΄μ£Όμ„Έμ”!</p>
        </div>
      </div>

      <!-- β… μ‹ κ³  μ™„λ£ νμ—… -->
      <div id="report-popup">
        <img src="imgs/check.png" alt="μ²΄ν¬ μ•„μ΄μ½" class="check-icon">
        <p>μ‹ κ³ κ°€ μ™„λ£λμ—μµλ‹λ‹¤!</p>
      </div>
    </div>

    <!-- μ¬λΌμ΄λ”© μΉ΄λ“ -->
    <div id="info-card">
      <div class="handle"></div>
      <h3>
        <img src="imgs/marker-pin-04.png" alt="κ²½κ³  μ•„μ΄μ½" class="icon-img">
        μ„κ°•λ΅ μ£Όλ³€ κ³¨λ©
      </h3>
      <p>μ„κ°•λ΅ μ£Όλ³€ κ³¨λ©λ“¤μ— λ„λ΅ κ²°ν•¨ λ° ν¬νΈν™€μ΄ λ‹¤μ λ°μƒν–κ³ , μ°μ²μΌλ΅ μΈν•΄ μ£Όλ³€μ΄ λ§¤μ° λ―Έλ„λ½μµλ‹λ‹¤.</p>
      <div class="images">
        <img src="imgs/pothole2.jpg" alt="μ„ν—1">
      </div>
    </div>
  </div>

  <script>
    function endRide() {
  window.location.href = "mapfinish.html";
}

    // λ‹«κΈ° λ²„νΌ
    function closeOverlay(e) {
      e.stopPropagation(); // μ¤λ²„λ μ΄ ν΄λ¦­ μ΄λ²¤νΈ λ°©μ§€
      document.getElementById("report-overlay").style.display = "none";
    }

    // λ”λΈ”νƒ­ κ°μ§€
    let lastTap = 0;
    function detectDoubleTap(e) {
      const now = new Date().getTime();
      const timeSince = now - lastTap;

      if (timeSince < 400 && timeSince > 0) {
        handleReport();
        document.getElementById("report-overlay").style.display = "none";
      }

      lastTap = now;
    }

    function handleReport() {
      const popup = document.getElementById("report-popup");
      const overlay = document.getElementById("report-overlay");

      // μ‹ κ³  μ™„λ£ νμ—… ν‘μ‹
      popup.style.display = "flex";

      // 2μ΄ ν›„ νμ—… λ‹«κ³  μ¤λ²„λ μ΄ λ‹¤μ‹ ν‘μ‹
      setTimeout(() => {
        popup.style.display = "none";
        overlay.style.display = "flex";
      }, 2000);
    }
  </script>
  <script src="js/mapdrive.js"></script>
</body>
</html>