<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>별타고 주행 화면</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- Kakao Map SDK -->
  <script src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=ca66c24bcf740dae018b8f1511d02475&libraries=services"></script>
  <!-- Kakao JavaScript SDK -->
  <script src="https://developers.kakao.com/sdk/js/kakao.js"></script>
  <script>
    window.localStorage.clear(); // 로컬 스토리지 초기화
    Kakao.init("ca66c24bcf740dae018b8f1511d02475");
    if (!Kakao.isInitialized()) {
      console.error("Kakao init failed!");
    }
  </script>

  <link rel="stylesheet" href="css/newmapstyle3.css">
  <link rel="icon" href="imgs/logo2.png" type="image/x-icon">
</head>
<body>
  <!-- 상세 정보 모달 -->
  <div id="report-modal" class="modal">
    <div class="modal-content">
      <span class="modal-handle"></span>

      <div class="modal-header">
        <img id="modal-icon" src="" alt="마커 아이콘">
        <div>
          <h3 id="modal-title" style="margin: 0;"></h3>
          <p id="modal-date" style="margin: 2px 0 0; font-size: 12px; color: #666;"></p>
        </div>
      </div>

      <p id="modal-description">내용</p>
      <div id="modal-images" class="carousel">
        <button id="carousel-prev">&#8592;</button>
        <div id="carousel-track" class="carousel-track"></div>
        <button id="carousel-next">&#8594;</button>
      </div>
    </div>
  </div>

  <div class="app-container">

    <!-- 툴바 -->
    <button id="menu-toggle">☰</button>
    <button class="back-btn" onclick="goBack()">←</button>

    <!-- 사이드바 -->
    <div id="sidebar">
      <h3>
        <img src="imgs/homeicon.svg" alt="홈 아이콘" style="width: 20px; height: 20px; vertical-align: middle; margin-right: 5px;">
        홈
      </h3>
      <div class="menu-item">
        <img src="imgs/communityicon.png" alt="커뮤니티 아이콘" class="menu-icon">
        커뮤니티
      </div>
      <div class="menu-item">사용 방법</div>
      <div class="menu-item">
        <img src="imgs/mypage.png" alt="마이페이지 아이콘" class="menu-icon">
        내 정보
      </div>
    </div>

    <!-- 로고 영역 -->
    <div class="logo-area">
      <img src="imgs/logo.png" alt="별타고 로고" class="logo-img">
    </div>

    <!-- 지도 영역 -->
    <div id="map-container">
      <div id="map"></div>
      
      <button id="center-user-button" onclick="centerUserLocation()">📍</button>

      <!-- 버튼 두 개를 나란히 정렬 -->
      <div class="button-row">
        <button class="map-button start-btn" onclick="startRide()">주행 시작</button>
        <button class="map-button report-btn" onclick="goToWalkerReport()">도로 신고</button>
      </div>
    </div>

  </div>

  <script type="module" src="js/mapstart.js"></script>
  <script>
    function goBack() {
      window.history.back();
    }

    function startRide() {
      window.location.href = "mapdriving.html";
    }

    function goToWalkerReport() {
      window.location.href = "walkerreport.html";
    }

    function closeModal() {
      const modalEl = document.getElementById("report-modal");
      modalEl.classList.remove("show");
    }
  </script>
</body>
</html>
