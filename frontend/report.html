<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ë³„íƒ€ê³  - ë„ë¡œ ì‹ ê³ í•˜ê¸°</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" href="imgs/logo2.png" type="image/x-icon">
  <link rel="stylesheet" href="css/report.css">
  <script src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=ca66c24bcf740dae018b8f1511d02475&libraries=services,drawing"></script>
</head>
<body>
  <div class="app-container">
    <!-- í—¤ë” -->
    <header class="header">
        <button class="back-btn" onclick="goBack()">â†</button>
        <div class="header-title"> ë„ë¡œ ì‹ ê³ í•˜ê¸°</div>
        <button class="home-btn" onclick="confirmHomeNavigation()">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 2L2 7.5V22H10V16H14V22H22V7.5L12 2Z" fill="white"/>
            </svg>
        </button>
    </header>
    <!-- ì§€ë„ ì˜ì—­ -->
    <div id="map-container">
      <div id="map"></div>
    </div>

    <!-- ì‹ ê³  ì •ë³´ ì¹´ë“œ -->
    <div id="report-info">
      <div class="info-row">
        <div class="info-label">ğŸ“ ìœ„ì¹˜</div>
        <div class="info-value">
          <select id="location-select"></select>
          <div id="location-text"  class="data-display" style="display: none; font-weight: bold;"></div>
        </div>
      </div>

      <div class="info-row">
        <div class="info-label">ğŸš— ê²°í•¨ ì¢…ë¥˜</div>
        <div class="info-value">
          <div id="damage-display" class="data-display">(ì¢…ë¥˜ ì„ íƒ)</div>
          <button class="arrow-button" onclick="openModal()">
            <img src="imgs/choice.png" alt="ì„ íƒí™”ì‚´í‘œ">
          </button>
        </div>
      </div>

      <div class="info-row" id="custom-description-row">
        <div class="info-label">ğŸ“ ì„¤ëª… ì…ë ¥ (ì„ íƒ ì‚¬í•­)</div>
        <div id="description-display" class="data-display"></div>
        <button class="arrow-button" onclick="openModal2()">
          <img src="imgs/choice.png" alt="ì„ íƒí™”ì‚´í‘œ">
        </button>
      </div>
      <div class="info-row photo-preview">
        <div class="info-label">ğŸ“¸ ì‚¬ì§„ (ì„ íƒì‚¬í•­)</div>
        <button class="arrow-button">
          <img src="imgs/choice.png" alt="ì„ íƒí™”ì‚´í‘œ">
        </button>
      </div>
    </div>
    <button id="submit-report">ì‹ ê³ í•˜ê¸°</button>
  </div>

  <!-- ê²°í•¨ ì¢…ë¥˜ ëª¨ë‹¬ -->
  <div id="modal-overlay" class="modal-overlay">
    <div id="report-modal" class="modal">
      <button class="modal-close" onclick="closeModal()">Ã—</button>
      <div class="section">
        <div class="section-title">ì–´ë–¤ ì¢…ë¥˜ì˜ ìœ„í—˜êµ¬ê°„ì´ì—ˆëŠ”ì§€ ê³¨ë¼ì£¼ì„¸ìš”.</div>
        <div class="choices">
          <div class="choice">
            <img src="imgs/option1.svg" alt="ì°¨ë„ì™€ êµ¬ë¶„ ì–´ë ¤ì›€">
            <div>ì°¨ë„ì™€ êµ¬ë¶„ ì–´ë ¤ì›€</div>
          </div>
          <div class="choice">
            <img src="imgs/option2.svg" alt="ë„ë¡œ ìœµê¸°">
            <div>ë„ë¡œ ìœµê¸°</div>
          </div>
          <div class="choice">
            <img src="imgs/option3.svg" alt="ë„ë¡œ íŒŒì„">
            <div>ë„ë¡œ íŒŒì„</div>
          </div>
          <div class="choice">
            <img src="imgs/option4.svg" alt="ë¶ˆë²• ì£¼ì°¨">
            <div>ë¶ˆë²• ì£¼ì°¨</div>
          </div>
          <div class="choice">
            <img src="imgs/option5.svg" alt="ê³µì‚¬ êµ¬ê°„">
            <div>ê³µì‚¬ êµ¬ê°„</div>
          </div>
          <div class="choice">
            <img src="imgs/option6.svg" alt="ì§ì ‘ ì…ë ¥">
            <div>ì§ì ‘ ì…ë ¥</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ì„¤ëª… ì…ë ¥ ëª¨ë‹¬ -->
  <div id="modal-overlay-2" class="modal-overlay">
    <div id="report-modal-2" class="modal">
      <button class="modal-close" onclick="closeModal2()">Ã—</button>
      <div class="section2">
        <div class="section-title">ê²°í•¨ì— ëŒ€í•œ ì„¤ëª…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.</div>
        <div class="info-value">
          <textarea id="custom-description" placeholder="ìƒì„¸ ì„¤ëª…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”"></textarea>
        </div>
        <button id="save-description-btn-2">ì„¤ëª… ì €ì¥</button>
      </div>
    </div>
  </div>

  <script>
    let selectedDamageType = null;

    function openModal() {
      document.getElementById('modal-overlay').classList.add("show");
      document.getElementById('report-modal').classList.add("show");
    }

    function closeModal() {
      document.getElementById('modal-overlay').classList.remove("show");
      document.getElementById('report-modal').classList.remove("show");
    }

    function openModal2() {
    const damageType = document.getElementById('damage-display').textContent.trim();
    if (!damageType || damageType === '(ì¢…ë¥˜ ì„ íƒ)') {
      alert('ê²°í•¨ ì¢…ë¥˜ë¥¼ ë¨¼ì € ì„ íƒí•´ì£¼ì„¸ìš”.');
      return;
    }
      document.getElementById('modal-overlay-2').classList.add("show");
      document.getElementById('report-modal-2').classList.add("show");
    }

    function closeModal2() {
      document.getElementById('modal-overlay-2').classList.remove("show");
      document.getElementById('report-modal-2').classList.remove("show");
    }

    function goBack() {
      window.history.back();
    }

    function confirmHomeNavigation() {
      const confirmed = confirm("ì‹ ê³ ë¥¼ ì·¨ì†Œí•˜ê³  í™ˆìœ¼ë¡œ ì´ë™í• ê¹Œìš”?");
      if (confirmed) {
        window.location.href = "mapstart.html";
      }
    }
  </script>
  <script type="module" src="js/report.js"></script>
</body>
</html>
